# Instrucciones para Claude Code

Este repositorio contiene documentación de la API de SOS Contador.

## Archivo principal a leer

**SIEMPRE lee primero:** `API_DOCUMENTATION_AI.md`

Este archivo contiene:
- Todos los endpoints documentados
- Ejemplos completos de uso
- Schemas JSON con validaciones
- Sección "Notas para Implementación en IA" con reglas críticas

## Reglas importantes

1. **NUNCA inventar endpoints** - Solo usar los documentados en `API_DOCUMENTATION_AI.md`

2. **Campos que NUNCA inventar:**
   - `idclipro`: Debe obtenerse de GET /cliente/listado
   - `cuitclipro`: Debe ser un CUIT válido del cliente
   - `id` en productos: Debe obtenerse de GET /producto/listado
   - `puntoventa`: Debe obtenerse de GET /puntoventa/listado

3. **Siempre generar UUID único** para `uniqueid` en ventas

4. **Validar antes de crear:**
   - Verificar que el cliente existe
   - Verificar que los productos existen
   - Calcular correctamente las imputaciones

5. **Usar formato correcto de CUIT:** XX-XXXXXXXX-X (con guiones)

## Flujo típico para crear una venta

```python
# 1. Autenticarse
# 2. Obtener token de CUIT
# 3. Listar clientes → obtener idclipro y cuitclipro
# 4. Listar productos → obtener IDs de productos
# 5. Crear venta con datos validados
# 6. Generar UUID único
```

## Referencias rápidas

- Cheat sheet: `QUICK_REFERENCE.md`
- Spec OpenAPI: `openapi.yaml`
- Ejemplos código: carpeta `examples/`

## Base URL

```
https://api.sos-contador.com/api-comunidad
```

## Autenticación

1. POST /login → user_token
2. GET /cuit/credentials/{id} → cuit_token  
3. Usar cuit_token en todas las operaciones

## Endpoints más usados

- GET /cliente/listado
- GET /producto/listado
- GET /puntoventa/listado
- PUT /venta/0 (crear nueva venta)
- PUT /producto/0 (crear nuevo producto)
